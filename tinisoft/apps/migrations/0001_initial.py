# Generated by Django 4.2.11 on 2025-12-17 11:59

import apps.models.webhook
from decimal import Decimal
from django.conf import settings
import django.contrib.auth.models
import django.contrib.auth.validators
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='User',
            fields=[
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('username', models.CharField(error_messages={'unique': 'A user with that username already exists.'}, help_text='Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.', max_length=150, unique=True, validators=[django.contrib.auth.validators.UnicodeUsernameValidator()], verbose_name='username')),
                ('first_name', models.CharField(blank=True, max_length=150, verbose_name='first name')),
                ('last_name', models.CharField(blank=True, max_length=150, verbose_name='last name')),
                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),
                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('email', models.EmailField(db_index=True, max_length=254, unique=True)),
                ('phone', models.CharField(blank=True, max_length=20, null=True)),
                ('role', models.CharField(choices=[('owner', 'Owner'), ('tenant_owner', 'Tenant Owner'), ('tenant_user', 'Tenant User'), ('tenant_bayii', 'Tenant Bayii'), ('system_admin', 'System Admin')], db_index=True, default='tenant_user', help_text='User rolü: Owner, TenantUser, TenantBayii, SystemAdmin', max_length=20)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='custom_user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
            ],
            options={
                'db_table': 'users',
                'ordering': ['-date_joined'],
            },
            managers=[
                ('objects', django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name='Cart',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('session_id', models.CharField(blank=True, db_index=True, help_text='Guest checkout için session ID', max_length=255)),
                ('is_active', models.BooleanField(db_index=True, default=True, help_text='Aktif sepet mi? (sipariş verildikten sonra false olur)')),
                ('subtotal', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('shipping_cost', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('tax_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('discount_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('total', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('coupon_code', models.CharField(blank=True, help_text='Kupon kodu', max_length=50)),
                ('currency', models.CharField(default='TRY', max_length=3)),
                ('expires_at', models.DateTimeField(blank=True, help_text='Sepet son kullanma tarihi (genelde 30 gün)', null=True)),
            ],
            options={
                'db_table': 'carts',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Category',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(db_index=True, max_length=255)),
                ('slug', models.SlugField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='apps.category')),
            ],
            options={
                'db_table': 'categories',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Coupon',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('code', models.CharField(db_index=True, help_text='Kupon kodu', max_length=50, unique=True)),
                ('name', models.CharField(help_text='Kupon adı', max_length=255)),
                ('description', models.TextField(blank=True)),
                ('discount_type', models.CharField(choices=[('percentage', 'Yüzde'), ('fixed', 'Sabit Tutar'), ('free_shipping', 'Ücretsiz Kargo')], default='percentage', max_length=20)),
                ('discount_value', models.DecimalField(decimal_places=2, help_text='İndirim değeri (yüzde veya tutar)', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('max_discount_amount', models.DecimalField(blank=True, decimal_places=2, help_text='Maksimum indirim tutarı (yüzde indirimlerde)', max_digits=10, null=True)),
                ('applicable_to', models.CharField(choices=[('all', 'Tüm Ürünler'), ('category', 'Kategori'), ('product', 'Ürün'), ('collection', 'Koleksiyon')], default='all', max_length=20)),
                ('applicable_collections', models.JSONField(default=list, help_text='Uygulanabilir koleksiyonlar (JSON array)')),
                ('minimum_order_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Minimum sipariş tutarı', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('usage_limit', models.PositiveIntegerField(blank=True, help_text='Toplam kullanım limiti (null = sınırsız)', null=True)),
                ('usage_count', models.PositiveIntegerField(default=0, help_text='Kullanım sayısı')),
                ('usage_limit_per_customer', models.PositiveIntegerField(blank=True, help_text='Müşteri başına kullanım limiti (null = sınırsız)', null=True)),
                ('valid_from', models.DateTimeField(default=django.utils.timezone.now)),
                ('valid_until', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('customer_emails', models.JSONField(default=list, help_text="Sadece bu email'lere uygulanır (boş = herkese)")),
                ('customer_groups', models.JSONField(default=list, help_text='Sadece bu müşteri gruplarına uygulanır (boş = herkese)')),
                ('applicable_categories', models.ManyToManyField(blank=True, related_name='coupons', to='apps.category')),
            ],
            options={
                'db_table': 'coupons',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='GiftCard',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('code', models.CharField(db_index=True, help_text='Kart kodu', max_length=50, unique=True)),
                ('type', models.CharField(choices=[('fixed', 'Sabit Tutar'), ('percentage', 'Yüzde')], default='fixed', max_length=20)),
                ('initial_amount', models.DecimalField(decimal_places=2, help_text='Başlangıç tutarı', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('current_amount', models.DecimalField(decimal_places=2, help_text='Kalan tutar', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('percentage_value', models.DecimalField(blank=True, decimal_places=2, help_text='Yüzde değeri (percentage tipinde)', max_digits=5, null=True)),
                ('customer_email', models.EmailField(blank=True, help_text='Kart sahibi e-posta (guest için)', max_length=254)),
                ('valid_from', models.DateTimeField(default=django.utils.timezone.now)),
                ('valid_until', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('active', 'Aktif'), ('used', 'Kullanıldı'), ('expired', 'Süresi Doldu'), ('cancelled', 'İptal Edildi')], db_index=True, default='active', max_length=20)),
                ('usage_count', models.PositiveIntegerField(default=0)),
                ('last_used_at', models.DateTimeField(blank=True, null=True)),
                ('note', models.TextField(blank=True, help_text='Kart notu')),
                ('customer', models.ForeignKey(blank=True, help_text='Kart sahibi (opsiyonel)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='gift_cards', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'gift_cards',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LoyaltyPoints',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('total_points', models.PositiveIntegerField(default=0, help_text='Toplam kazanılan puan')),
                ('available_points', models.PositiveIntegerField(default=0, help_text='Kullanılabilir puan')),
                ('used_points', models.PositiveIntegerField(default=0, help_text='Kullanılan puan')),
                ('expired_points', models.PositiveIntegerField(default=0, help_text='Süresi dolan puan')),
                ('customer', models.OneToOneField(help_text='Müşteri (TenantUser)', on_delete=django.db.models.deletion.CASCADE, related_name='loyalty_points', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'loyalty_points',
            },
        ),
        migrations.CreateModel(
            name='Order',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('order_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('customer_email', models.EmailField(db_index=True, max_length=254)),
                ('customer_first_name', models.CharField(max_length=100)),
                ('customer_last_name', models.CharField(max_length=100)),
                ('customer_phone', models.CharField(blank=True, max_length=20)),
                ('billing_address', models.JSONField(default=dict, help_text='Fatura adresi (JSON format)')),
                ('status', models.CharField(choices=[('pending', 'Beklemede'), ('confirmed', 'Onaylandı'), ('processing', 'Hazırlanıyor'), ('shipped', 'Kargoya Verildi'), ('delivered', 'Teslim Edildi'), ('cancelled', 'İptal Edildi'), ('refunded', 'İade Edildi')], db_index=True, default='pending', max_length=20)),
                ('payment_status', models.CharField(choices=[('pending', 'Ödeme Bekleniyor'), ('paid', 'Ödendi'), ('partially_paid', 'Kısmen Ödendi'), ('refunded', 'İade Edildi'), ('failed', 'Ödeme Başarısız')], db_index=True, default='pending', max_length=20)),
                ('subtotal', models.DecimalField(decimal_places=2, help_text='Ara toplam (ürün fiyatları toplamı)', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('shipping_cost', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Kargo ücreti', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('tax_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Vergi tutarı', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('discount_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='İndirim tutarı', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('total', models.DecimalField(decimal_places=2, help_text='Toplam tutar', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('tracking_number', models.CharField(blank=True, max_length=100)),
                ('shipped_at', models.DateTimeField(blank=True, null=True)),
                ('delivered_at', models.DateTimeField(blank=True, null=True)),
                ('coupon_code', models.CharField(blank=True, help_text='Kupon kodu (snapshot)', max_length=50)),
                ('coupon_discount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Kupon indirimi', max_digits=10)),
                ('customer_note', models.TextField(blank=True, help_text='Müşteri notu')),
                ('admin_note', models.TextField(blank=True, help_text='Admin notu')),
                ('currency', models.CharField(default='TRY', max_length=3)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('coupon', models.ForeignKey(blank=True, help_text='Kullanılan kupon', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='orders', to='apps.coupon')),
                ('customer', models.ForeignKey(blank=True, help_text='Siparişi veren müşteri (TenantUser)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='orders', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'orders',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Product',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(db_index=True, max_length=255)),
                ('slug', models.SlugField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('price', models.DecimalField(decimal_places=2, max_digits=10)),
                ('compare_at_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('sku', models.CharField(blank=True, db_index=True, max_length=100)),
                ('barcode', models.CharField(blank=True, max_length=100)),
                ('track_inventory', models.BooleanField(default=True)),
                ('inventory_quantity', models.IntegerField(default=0)),
                ('is_variant_product', models.BooleanField(default=False, help_text='Ürünün varyantları var mı? Varsa stok/fiyat bilgisi varyantlarda tutulur.')),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('active', 'Active'), ('archived', 'Archived')], db_index=True, default='draft', max_length=20)),
                ('meta_title', models.CharField(blank=True, help_text='SEO başlık (meta title)', max_length=255)),
                ('meta_description', models.TextField(blank=True, help_text='SEO açıklama (meta description)')),
                ('meta_keywords', models.CharField(blank=True, help_text='SEO anahtar kelimeler (virgülle ayrılmış)', max_length=500)),
                ('tags', models.JSONField(default=list, help_text='Ürün etiketleri (JSON array)')),
                ('collections', models.JSONField(default=list, help_text='Ürün koleksiyonları (JSON array)')),
                ('weight', models.DecimalField(blank=True, decimal_places=2, help_text='Ağırlık (kg)', max_digits=10, null=True)),
                ('length', models.DecimalField(blank=True, decimal_places=2, help_text='Uzunluk (cm)', max_digits=10, null=True)),
                ('width', models.DecimalField(blank=True, decimal_places=2, help_text='Genişlik (cm)', max_digits=10, null=True)),
                ('height', models.DecimalField(blank=True, decimal_places=2, help_text='Yükseklik (cm)', max_digits=10, null=True)),
                ('is_featured', models.BooleanField(db_index=True, default=False, help_text='Öne çıkan ürün mü?')),
                ('is_new', models.BooleanField(db_index=True, default=False, help_text='Yeni ürün mü?')),
                ('is_bestseller', models.BooleanField(db_index=True, default=False, help_text='Çok satan ürün mü?')),
                ('sort_order', models.IntegerField(db_index=True, default=0, help_text='Sıralama (düşük değer önce gösterilir)')),
                ('is_visible', models.BooleanField(db_index=True, default=True, help_text='Müşterilere görünür mü?')),
                ('available_from', models.DateTimeField(blank=True, help_text='Ne zaman satışa çıkacak?', null=True)),
                ('available_until', models.DateTimeField(blank=True, help_text='Ne zaman satıştan kalkacak?', null=True)),
                ('view_count', models.PositiveIntegerField(default=0)),
                ('sale_count', models.PositiveIntegerField(default=0)),
                ('metadata', models.JSONField(default=dict, help_text='Ek bilgiler (JSON format)')),
                ('categories', models.ManyToManyField(blank=True, related_name='products', to='apps.category')),
            ],
            options={
                'db_table': 'products',
                'ordering': ['sort_order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProductAttribute',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(db_index=True, help_text='Özellik adı (örn: Renk)', max_length=100)),
                ('slug', models.SlugField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('attribute_type', models.CharField(choices=[('text', 'Metin'), ('number', 'Sayı'), ('boolean', 'Evet/Hayır'), ('select', 'Seçim'), ('multiselect', 'Çoklu Seçim'), ('color', 'Renk'), ('image', 'Görsel')], default='select', max_length=20)),
                ('is_filterable', models.BooleanField(default=True, help_text='Filtreleme için kullanılabilir mi?')),
                ('is_visible', models.BooleanField(default=True, help_text='Ürün sayfasında görünür mü?')),
                ('position', models.PositiveIntegerField(default=0)),
            ],
            options={
                'db_table': 'product_attributes',
                'ordering': ['position', 'name'],
            },
        ),
        migrations.CreateModel(
            name='ProductBundle',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(db_index=True, max_length=255)),
                ('slug', models.SlugField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('bundle_price', models.DecimalField(decimal_places=2, help_text='Paket fiyatı (bireysel ürün fiyatlarından farklı olabilir)', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('discount_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='İndirim yüzdesi (bireysel fiyatlara göre)', max_digits=5, null=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('sort_order', models.PositiveIntegerField(default=0)),
                ('main_product', models.OneToOneField(help_text="Bundle'ın ana ürünü", on_delete=django.db.models.deletion.CASCADE, related_name='bundle', to='apps.product')),
            ],
            options={
                'db_table': 'product_bundles',
                'ordering': ['sort_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='ProductOption',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(max_length=100)),
                ('position', models.PositiveIntegerField(default=0)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='options', to='apps.product')),
            ],
            options={
                'db_table': 'product_options',
                'ordering': ['position', 'created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProductOptionValue',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('value', models.CharField(max_length=100)),
                ('position', models.PositiveIntegerField(default=0)),
                ('option', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='values', to='apps.productoption')),
            ],
            options={
                'db_table': 'product_option_values',
                'ordering': ['position', 'created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProductReview',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('customer_name', models.CharField(max_length=100)),
                ('customer_email', models.EmailField(max_length=254)),
                ('rating', models.PositiveIntegerField(help_text='Puan (1-5)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('title', models.CharField(blank=True, max_length=255)),
                ('comment', models.TextField()),
                ('status', models.CharField(choices=[('pending', 'Beklemede'), ('approved', 'Onaylandı'), ('rejected', 'Reddedildi')], db_index=True, default='pending', max_length=20)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('helpful_count', models.PositiveIntegerField(default=0)),
                ('images', models.JSONField(default=list, help_text='Yorum görselleri (JSON array of URLs)')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('verified_purchase', models.BooleanField(default=False, help_text='Doğrulanmış satın alma (sipariş verdi mi?)')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_reviews', to=settings.AUTH_USER_MODEL)),
                ('customer', models.ForeignKey(blank=True, help_text='Yorum yapan müşteri (guest için null)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviews', to=settings.AUTH_USER_MODEL)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews', to='apps.product')),
            ],
            options={
                'db_table': 'product_reviews',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProductVariant',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(help_text='Varyant adı (örn: M / Kırmızı).', max_length=255)),
                ('price', models.DecimalField(decimal_places=2, max_digits=10)),
                ('compare_at_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('track_inventory', models.BooleanField(default=True)),
                ('inventory_quantity', models.IntegerField(default=0)),
                ('sku', models.CharField(blank=True, db_index=True, max_length=100)),
                ('barcode', models.CharField(blank=True, max_length=100)),
                ('is_default', models.BooleanField(default=False, help_text='Varsayılan gösterilecek varyant mı?')),
                ('image_url', models.URLField(blank=True, help_text='Varyanta özel görsel', max_length=1000)),
                ('option_values', models.ManyToManyField(blank=True, help_text='Varyantın sahip olduğu option değerleri (örn: Beden: M, Renk: Kırmızı)', related_name='variants', to='apps.productoptionvalue')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='variants', to='apps.product')),
            ],
            options={
                'db_table': 'product_variants',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ShippingMethod',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(max_length=255)),
                ('code', models.CharField(db_index=True, max_length=50)),
                ('is_active', models.BooleanField(default=True)),
                ('price', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('free_shipping_threshold', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
            ],
            options={
                'db_table': 'shipping_methods',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='ShippingZone',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(help_text='Bölge adı (İstanbul, Ankara, vb.)', max_length=255)),
                ('description', models.TextField(blank=True)),
                ('countries', models.JSONField(default=list, help_text="Ülkeler (JSON array, örn: ['TR', 'US'])")),
                ('cities', models.JSONField(default=list, help_text='Şehirler (JSON array, boş = tüm şehirler)')),
                ('postal_codes', models.JSONField(default=list, help_text='Posta kodları (JSON array, boş = tüm posta kodları)')),
                ('is_active', models.BooleanField(db_index=True, default=True)),
            ],
            options={
                'db_table': 'shipping_zones',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Tenant',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(db_index=True, max_length=255)),
                ('slug', models.SlugField(max_length=255, unique=True)),
                ('subdomain', models.CharField(db_index=True, max_length=255, unique=True)),
                ('custom_domain', models.CharField(blank=True, db_index=True, max_length=255, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('active', 'Active'), ('suspended', 'Suspended'), ('deleted', 'Deleted')], db_index=True, default='pending', max_length=20)),
                ('plan', models.CharField(choices=[('free', 'Free'), ('basic', 'Basic'), ('pro', 'Pro'), ('enterprise', 'Enterprise')], default='free', max_length=50)),
                ('template', models.CharField(default='default', help_text='Frontend template adı (default, modern, classic, vb.)', max_length=100)),
                ('activated_at', models.DateTimeField(blank=True, null=True)),
                ('suspended_at', models.DateTimeField(blank=True, null=True)),
                ('owner', models.ForeignKey(help_text='Tenant sahibi (TenantOwner rolünde user - mağaza sahibi)', limit_choices_to={'role': 'tenant_owner'}, on_delete=django.db.models.deletion.CASCADE, related_name='owned_tenants', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'tenants',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Webhook',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(help_text='Webhook adı', max_length=255)),
                ('url', models.URLField(help_text="Webhook URL'i", max_length=1000)),
                ('events', models.JSONField(default=list, help_text="Dinlenecek event'ler (JSON array)")),
                ('secret_key', models.CharField(default=apps.models.webhook.generate_webhook_secret, help_text='Webhook secret key (signature için)', max_length=255)),
                ('status', models.CharField(choices=[('active', 'Aktif'), ('inactive', 'Pasif')], db_index=True, default='active', max_length=20)),
                ('success_count', models.PositiveIntegerField(default=0)),
                ('failure_count', models.PositiveIntegerField(default=0)),
                ('last_triggered_at', models.DateTimeField(blank=True, null=True)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='webhooks', to='apps.tenant')),
            ],
            options={
                'db_table': 'webhooks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Wishlist',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(default='Favorilerim', help_text='Liste adı', max_length=255)),
                ('is_default', models.BooleanField(default=True, help_text='Varsayılan liste mi?')),
                ('is_public', models.BooleanField(default=False, help_text='Herkese açık mı?')),
                ('customer', models.ForeignKey(help_text='Wishlist sahibi (TenantUser)', on_delete=django.db.models.deletion.CASCADE, related_name='wishlists', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='wishlists', to='apps.tenant')),
            ],
            options={
                'db_table': 'wishlists',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='WebhookEvent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('event_type', models.CharField(db_index=True, help_text='Event tipi', max_length=100)),
                ('payload', models.JSONField(default=dict, help_text='Event payload')),
                ('request_url', models.URLField(max_length=1000)),
                ('request_method', models.CharField(default='POST', max_length=10)),
                ('request_headers', models.JSONField(default=dict)),
                ('request_body', models.TextField(blank=True)),
                ('response_status', models.PositiveIntegerField(blank=True, null=True)),
                ('response_body', models.TextField(blank=True)),
                ('response_time_ms', models.PositiveIntegerField(blank=True, null=True)),
                ('is_success', models.BooleanField(db_index=True, default=False)),
                ('error_message', models.TextField(blank=True)),
                ('retry_count', models.PositiveIntegerField(default=0)),
                ('webhook', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='webhook_events', to='apps.webhook')),
            ],
            options={
                'db_table': 'webhook_events',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Tax',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(help_text='Vergi adı (KDV, ÖTV, vb.)', max_length=255)),
                ('rate', models.DecimalField(decimal_places=2, help_text='Vergi oranı (yüzde)', max_digits=5)),
                ('description', models.TextField(blank=True)),
                ('is_default', models.BooleanField(default=False, help_text='Varsayılan vergi mi?')),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='taxes', to='apps.tenant')),
            ],
            options={
                'db_table': 'taxes',
                'ordering': ['is_default', 'name'],
            },
        ),
        migrations.CreateModel(
            name='ShippingZoneRate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('price', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Sabit kargo ücreti', max_digits=10)),
                ('free_shipping_threshold', models.DecimalField(blank=True, decimal_places=2, help_text='Bu tutarın üzerinde ücretsiz kargo', max_digits=10, null=True)),
                ('weight_based_pricing', models.BooleanField(default=False, help_text='Ağırlık bazlı fiyatlandırma kullan')),
                ('base_weight', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Temel ağırlık (kg)', max_digits=10)),
                ('base_price', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Temel ağırlık için fiyat', max_digits=10)),
                ('additional_weight_price', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Ek ağırlık başına fiyat (kg başına)', max_digits=10)),
                ('is_active', models.BooleanField(default=True)),
                ('shipping_method', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='zone_rates', to='apps.shippingmethod')),
                ('zone', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='rates', to='apps.shippingzone')),
            ],
            options={
                'db_table': 'shipping_zone_rates',
                'ordering': ['shipping_method', 'zone'],
            },
        ),
        migrations.AddField(
            model_name='shippingzone',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='shipping_zones', to='apps.tenant'),
        ),
        migrations.AddField(
            model_name='shippingmethod',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='shipping_methods', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='ShippingAddress',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('first_name', models.CharField(max_length=100)),
                ('last_name', models.CharField(max_length=100)),
                ('phone', models.CharField(max_length=20)),
                ('address_line_1', models.CharField(max_length=255)),
                ('address_line_2', models.CharField(blank=True, max_length=255)),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(blank=True, max_length=100)),
                ('postal_code', models.CharField(max_length=20)),
                ('country', models.CharField(default='Turkey', max_length=100)),
                ('is_default', models.BooleanField(default=False)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='shipping_addresses', to='apps.tenant')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='shipping_addresses', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'shipping_addresses',
                'ordering': ['-is_default', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SalesReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('period', models.CharField(choices=[('daily', 'Günlük'), ('weekly', 'Haftalık'), ('monthly', 'Aylık'), ('yearly', 'Yıllık')], db_index=True, max_length=20)),
                ('period_start', models.DateField(db_index=True)),
                ('period_end', models.DateField(db_index=True)),
                ('total_orders', models.PositiveIntegerField(default=0)),
                ('total_revenue', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('total_products_sold', models.PositiveIntegerField(default=0)),
                ('average_order_value', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('new_customers', models.PositiveIntegerField(default=0)),
                ('returning_customers', models.PositiveIntegerField(default=0)),
                ('total_discounts', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('total_coupons_used', models.PositiveIntegerField(default=0)),
                ('total_shipping_cost', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('metadata', models.JSONField(default=dict, help_text='Ek istatistikler (JSON format)')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sales_reports', to='apps.tenant')),
            ],
            options={
                'db_table': 'sales_reports',
                'ordering': ['-period_start'],
            },
        ),
        migrations.CreateModel(
            name='ReviewHelpful',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('is_helpful', models.BooleanField(default=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('customer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='helpful_votes', to=settings.AUTH_USER_MODEL)),
                ('review', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='helpful_votes', to='apps.productreview')),
            ],
            options={
                'db_table': 'review_helpful',
            },
        ),
        migrations.CreateModel(
            name='Promotion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('promotion_type', models.CharField(choices=[('buy_x_get_y', 'X Al Y Bedava'), ('buy_x_get_discount', 'X Al İndirim Kazan'), ('minimum_purchase', 'Minimum Alışveriş İndirimi'), ('free_shipping', 'Ücretsiz Kargo'), ('gift', 'Hediye')], max_length=30)),
                ('minimum_quantity', models.PositiveIntegerField(blank=True, help_text='Minimum ürün miktarı', null=True)),
                ('minimum_order_amount', models.DecimalField(blank=True, decimal_places=2, help_text='Minimum sipariş tutarı', max_digits=10, null=True)),
                ('discount_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(Decimal('0.01')), django.core.validators.MaxValueValidator(Decimal('100.00'))])),
                ('valid_from', models.DateTimeField(default=django.utils.timezone.now)),
                ('valid_until', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('applicable_categories', models.ManyToManyField(blank=True, related_name='promotions', to='apps.category')),
                ('applicable_products', models.ManyToManyField(blank=True, related_name='promotions', to='apps.product')),
                ('gift_product', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='gift_promotions', to='apps.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='promotions', to='apps.tenant')),
            ],
            options={
                'db_table': 'promotions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='productreview',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='ProductImage',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('image_url', models.URLField(max_length=1000)),
                ('alt_text', models.CharField(blank=True, max_length=255)),
                ('position', models.PositiveIntegerField(default=0)),
                ('is_primary', models.BooleanField(default=False)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='images', to='apps.product')),
            ],
            options={
                'db_table': 'product_images',
                'ordering': ['position', 'created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProductBundleItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('quantity', models.PositiveIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1)])),
                ('position', models.PositiveIntegerField(default=0)),
                ('bundle', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='apps.productbundle')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bundle_items', to='apps.product')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='bundle_items', to='apps.productvariant')),
            ],
            options={
                'db_table': 'product_bundle_items',
                'ordering': ['position', 'created_at'],
            },
        ),
        migrations.AddField(
            model_name='productbundle',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='product_bundles', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='ProductAttributeValue',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('value', models.CharField(db_index=True, help_text='Değer (örn: Kırmızı)', max_length=255)),
                ('slug', models.SlugField(max_length=255)),
                ('color_code', models.CharField(blank=True, help_text='Renk kodu (hex, örn: #FF0000)', max_length=7)),
                ('image_url', models.URLField(blank=True, max_length=1000)),
                ('position', models.PositiveIntegerField(default=0)),
                ('attribute', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='values', to='apps.productattribute')),
            ],
            options={
                'db_table': 'product_attribute_values',
                'ordering': ['position', 'value'],
            },
        ),
        migrations.CreateModel(
            name='ProductAttributeMapping',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('attribute', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='product_mappings', to='apps.productattribute')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attribute_mappings', to='apps.product')),
                ('value', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='product_mappings', to='apps.productattributevalue')),
            ],
            options={
                'db_table': 'product_attribute_mappings',
            },
        ),
        migrations.AddField(
            model_name='productattribute',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='product_attributes', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='ProductAnalytics',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('view_count', models.PositiveIntegerField(default=0)),
                ('unique_viewers', models.PositiveIntegerField(default=0)),
                ('sale_count', models.PositiveIntegerField(default=0)),
                ('total_revenue', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10)),
                ('add_to_cart_count', models.PositiveIntegerField(default=0)),
                ('remove_from_cart_count', models.PositiveIntegerField(default=0)),
                ('cart_conversion_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Sepete ekleme / Görüntüleme oranı (%)', max_digits=5)),
                ('conversion_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Satış / Görüntüleme oranı (%)', max_digits=5)),
                ('report_date', models.DateField(db_index=True)),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analytics', to='apps.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='product_analytics', to='apps.tenant')),
            ],
            options={
                'db_table': 'product_analytics',
                'ordering': ['-report_date', '-view_count'],
            },
        ),
        migrations.AddField(
            model_name='product',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='products', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('payment_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('method', models.CharField(choices=[('credit_card', 'Kredi Kartı'), ('debit_card', 'Banka Kartı'), ('bank_transfer', 'Banka Havalesi'), ('cash_on_delivery', 'Kapıda Ödeme'), ('wallet', 'Cüzdan'), ('other', 'Diğer')], db_index=True, max_length=20)),
                ('status', models.CharField(choices=[('pending', 'Beklemede'), ('processing', 'İşleniyor'), ('completed', 'Tamamlandı'), ('failed', 'Başarısız'), ('cancelled', 'İptal Edildi'), ('refunded', 'İade Edildi'), ('partially_refunded', 'Kısmen İade Edildi')], db_index=True, default='pending', max_length=20)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))])),
                ('currency', models.CharField(default='TRY', max_length=3)),
                ('provider', models.CharField(blank=True, help_text='Ödeme sağlayıcı (iyzico, paytr, vb.)', max_length=50)),
                ('transaction_id', models.CharField(blank=True, db_index=True, help_text='Ödeme sağlayıcı transaction ID', max_length=255)),
                ('payment_intent_id', models.CharField(blank=True, help_text='Payment intent ID (iyzico, paytr vb.)', max_length=255)),
                ('paid_at', models.DateTimeField(blank=True, null=True)),
                ('failed_at', models.DateTimeField(blank=True, null=True)),
                ('refunded_at', models.DateTimeField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True)),
                ('error_code', models.CharField(blank=True, max_length=50)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('metadata', models.JSONField(default=dict, help_text='Ek bilgiler (JSON format)')),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='apps.order')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='apps.tenant')),
            ],
            options={
                'db_table': 'payments',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='OrderItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('product_name', models.CharField(max_length=255)),
                ('variant_name', models.CharField(blank=True, max_length=255)),
                ('product_sku', models.CharField(blank=True, max_length=100)),
                ('quantity', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(1)])),
                ('unit_price', models.DecimalField(decimal_places=2, help_text='Birim fiyat (sipariş anındaki fiyat)', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('total_price', models.DecimalField(decimal_places=2, help_text='Toplam fiyat (quantity * unit_price)', max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('product_image_url', models.URLField(blank=True, max_length=1000)),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='apps.order')),
                ('product', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='order_items', to='apps.product')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='order_items', to='apps.productvariant')),
            ],
            options={
                'db_table': 'order_items',
                'ordering': ['created_at'],
            },
        ),
        migrations.AddField(
            model_name='order',
            name='shipping_address',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='orders', to='apps.shippingaddress'),
        ),
        migrations.AddField(
            model_name='order',
            name='shipping_method',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='orders', to='apps.shippingmethod'),
        ),
        migrations.AddField(
            model_name='order',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='orders', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='LoyaltyTransaction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('transaction_type', models.CharField(choices=[('earned', 'Kazanıldı'), ('used', 'Kullanıldı'), ('expired', 'Süresi Doldu'), ('refunded', 'İade Edildi')], max_length=20)),
                ('points', models.PositiveIntegerField(help_text='İşlem puanı')),
                ('reason', models.CharField(blank=True, max_length=255)),
                ('notes', models.TextField(blank=True)),
                ('loyalty_points', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='apps.loyaltypoints')),
                ('order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='loyalty_transactions', to='apps.order')),
            ],
            options={
                'db_table': 'loyalty_transactions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LoyaltyProgram',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(default='Sadakat Programı', max_length=255)),
                ('description', models.TextField(blank=True)),
                ('points_per_currency', models.DecimalField(decimal_places=2, default=Decimal('1.00'), help_text='Her 1 TL için kaç puan? (örn: 1 TL = 1 puan)', max_digits=10)),
                ('points_per_order', models.PositiveIntegerField(default=0, help_text='Her sipariş için ekstra puan')),
                ('currency_per_point', models.DecimalField(decimal_places=2, default=Decimal('0.01'), help_text='Her 1 puan kaç TL? (örn: 1 puan = 0.01 TL)', max_digits=10)),
                ('minimum_points_to_redeem', models.PositiveIntegerField(default=100, help_text='Kullanmak için minimum puan')),
                ('maximum_points_per_order', models.PositiveIntegerField(blank=True, help_text='Sipariş başına maksimum kullanılabilir puan (null = sınırsız)', null=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('tenant', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='loyalty_program', to='apps.tenant')),
            ],
            options={
                'db_table': 'loyalty_programs',
            },
        ),
        migrations.AddField(
            model_name='loyaltypoints',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='loyalty_points', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='InventoryMovement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('movement_type', models.CharField(choices=[('in', 'Giriş'), ('out', 'Çıkış'), ('adjustment', 'Düzeltme'), ('reserved', 'Rezerve'), ('unreserved', 'Rezerve İptal'), ('returned', 'İade'), ('damaged', 'Hasarlı'), ('lost', 'Kayıp')], db_index=True, max_length=20)),
                ('quantity', models.IntegerField(help_text='Hareket miktarı (pozitif değer)', validators=[django.core.validators.MinValueValidator(1)])),
                ('previous_quantity', models.IntegerField(default=0, help_text='Hareket öncesi stok miktarı')),
                ('new_quantity', models.IntegerField(default=0, help_text='Hareket sonrası stok miktarı')),
                ('reason', models.CharField(blank=True, help_text='Hareket nedeni', max_length=255)),
                ('notes', models.TextField(blank=True, help_text='Ek notlar')),
                ('created_by', models.ForeignKey(blank=True, help_text='Hareketi oluşturan kullanıcı', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='inventory_movements', to=settings.AUTH_USER_MODEL)),
                ('order', models.ForeignKey(blank=True, help_text='Sipariş kaynaklı hareket', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='inventory_movements', to='apps.order')),
                ('order_item', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='inventory_movements', to='apps.orderitem')),
                ('product', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='inventory_movements', to='apps.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventory_movements', to='apps.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='inventory_movements', to='apps.productvariant')),
            ],
            options={
                'db_table': 'inventory_movements',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='InventoryAlert',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('threshold', models.PositiveIntegerField(help_text='Bu değerin altına düştüğünde uyarı ver')),
                ('notify_email', models.EmailField(blank=True, help_text='Bildirim gönderilecek e-posta', max_length=254)),
                ('notify_on_low_stock', models.BooleanField(default=True, help_text='Düşük stokta bildir')),
                ('notify_on_out_of_stock', models.BooleanField(default=True, help_text='Stok bittiğinde bildir')),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('last_notified_at', models.DateTimeField(blank=True, null=True)),
                ('product', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='inventory_alerts', to='apps.product')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventory_alerts', to='apps.tenant')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='inventory_alerts', to='apps.productvariant')),
            ],
            options={
                'db_table': 'inventory_alerts',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='GiftCardTransaction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('transaction_type', models.CharField(choices=[('purchase', 'Satın Alma'), ('usage', 'Kullanım'), ('refund', 'İade'), ('expiry', 'Süre Dolması')], max_length=20)),
                ('amount', models.DecimalField(decimal_places=2, help_text='İşlem tutarı', max_digits=10)),
                ('notes', models.TextField(blank=True)),
                ('gift_card', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transactions', to='apps.giftcard')),
                ('order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='gift_card_transactions', to='apps.order')),
            ],
            options={
                'db_table': 'gift_card_transactions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='giftcard',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='gift_cards', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='Domain',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('domain_name', models.CharField(db_index=True, max_length=255, unique=True)),
                ('is_primary', models.BooleanField(default=False)),
                ('is_custom', models.BooleanField(default=True)),
                ('verification_status', models.CharField(choices=[('pending', 'Pending'), ('verifying', 'Verifying'), ('verified', 'Verified'), ('failed', 'Failed')], db_index=True, default='pending', max_length=20)),
                ('verification_code', models.CharField(blank=True, max_length=100)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('last_checked_at', models.DateTimeField(blank=True, null=True)),
                ('ssl_enabled', models.BooleanField(default=True)),
                ('ssl_certificate', models.TextField(blank=True, null=True)),
                ('ssl_key', models.TextField(blank=True, null=True)),
                ('ssl_expires_at', models.DateTimeField(blank=True, null=True)),
                ('traefik_router_name', models.CharField(blank=True, max_length=255)),
                ('traefik_service_name', models.CharField(blank=True, max_length=255)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='domains', to='apps.tenant')),
            ],
            options={
                'db_table': 'domains',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Customer',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('first_name', models.CharField(db_index=True, max_length=100)),
                ('last_name', models.CharField(db_index=True, max_length=100)),
                ('phone', models.CharField(blank=True, max_length=20)),
                ('date_of_birth', models.DateField(blank=True, null=True)),
                ('gender', models.CharField(blank=True, choices=[('male', 'Erkek'), ('female', 'Kadın'), ('other', 'Diğer')], max_length=10)),
                ('total_orders', models.PositiveIntegerField(default=0)),
                ('total_spent', models.DecimalField(decimal_places=2, default=0, help_text='Toplam harcama', max_digits=10)),
                ('average_order_value', models.DecimalField(decimal_places=2, default=0, help_text='Ortalama sipariş değeri', max_digits=10)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('is_verified', models.BooleanField(default=False, help_text='Email doğrulandı mı?')),
                ('is_newsletter_subscribed', models.BooleanField(default=False, help_text='Bülten aboneliği')),
                ('customer_group', models.CharField(blank=True, help_text='Müşteri grubu (VIP, Regular, vb.)', max_length=50)),
                ('tags', models.JSONField(default=list, help_text='Müşteri etiketleri (JSON array)')),
                ('first_order_at', models.DateTimeField(blank=True, null=True)),
                ('last_order_at', models.DateTimeField(blank=True, null=True)),
                ('last_login_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, help_text='Admin notları')),
                ('metadata', models.JSONField(default=dict, help_text='Ek bilgiler (JSON format)')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='customers', to='apps.tenant')),
                ('user', models.OneToOneField(help_text="Müşteri user'ı (TenantUser rolünde)", on_delete=django.db.models.deletion.CASCADE, related_name='customer_profile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'customers',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Currency',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('code', models.CharField(db_index=True, help_text='Para birimi kodu (TRY, USD, EUR)', max_length=3)),
                ('name', models.CharField(help_text='Para birimi adı (Türk Lirası)', max_length=100)),
                ('symbol', models.CharField(help_text='Sembol (₺, $, €)', max_length=10)),
                ('exchange_rate', models.DecimalField(decimal_places=4, default=Decimal('1.0000'), help_text='Dönüşüm oranı (varsayılan para birimine göre)', max_digits=10)),
                ('decimal_places', models.PositiveIntegerField(default=2)),
                ('symbol_position', models.CharField(choices=[('before', 'Önce (₺100)'), ('after', 'Sonra (100₺)')], default='after', max_length=10)),
                ('is_default', models.BooleanField(db_index=True, default=False, help_text='Varsayılan para birimi mi?')),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='currencies', to='apps.tenant')),
            ],
            options={
                'db_table': 'currencies',
                'ordering': ['is_default', 'code'],
            },
        ),
        migrations.AddField(
            model_name='coupon',
            name='applicable_products',
            field=models.ManyToManyField(blank=True, related_name='coupons', to='apps.product'),
        ),
        migrations.AddField(
            model_name='coupon',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='coupons', to='apps.tenant'),
        ),
        migrations.AddField(
            model_name='category',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='categories', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='CartItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('quantity', models.PositiveIntegerField(default=1, validators=[django.core.validators.MinValueValidator(1)])),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('total_price', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))])),
                ('cart', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='apps.cart')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cart_items', to='apps.product')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='cart_items', to='apps.productvariant')),
            ],
            options={
                'db_table': 'cart_items',
                'ordering': ['created_at'],
            },
        ),
        migrations.AddField(
            model_name='cart',
            name='coupon',
            field=models.ForeignKey(blank=True, help_text='Uygulanan kupon', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='carts', to='apps.coupon'),
        ),
        migrations.AddField(
            model_name='cart',
            name='customer',
            field=models.ForeignKey(blank=True, help_text='Sepet sahibi (TenantUser) - guest checkout için null', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='carts', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='cart',
            name='shipping_method',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='carts', to='apps.shippingmethod'),
        ),
        migrations.AddField(
            model_name='cart',
            name='tenant',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='carts', to='apps.tenant'),
        ),
        migrations.CreateModel(
            name='AnalyticsEvent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('event_type', models.CharField(choices=[('page_view', 'Sayfa Görüntüleme'), ('product_view', 'Ürün Görüntüleme'), ('add_to_cart', 'Sepete Ekleme'), ('remove_from_cart', 'Sepetten Çıkarma'), ('checkout_start', 'Ödeme Başlatma'), ('checkout_complete', 'Ödeme Tamamlama'), ('order_created', 'Sipariş Oluşturma'), ('order_completed', 'Sipariş Tamamlama'), ('search', 'Arama'), ('filter', 'Filtreleme'), ('coupon_applied', 'Kupon Uygulama'), ('signup', 'Kayıt Olma'), ('login', 'Giriş Yapma')], db_index=True, max_length=50)),
                ('session_id', models.CharField(blank=True, db_index=True, max_length=255)),
                ('event_data', models.JSONField(default=dict, help_text='Event verileri (JSON format)')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('referrer', models.URLField(blank=True, max_length=1000)),
                ('url', models.URLField(blank=True, max_length=1000)),
                ('customer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='analytics_events', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analytics_events', to='apps.tenant')),
            ],
            options={
                'db_table': 'analytics_events',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AbandonedCart',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('customer_email', models.EmailField(db_index=True, max_length=254)),
                ('customer_name', models.CharField(blank=True, max_length=255)),
                ('customer_phone', models.CharField(blank=True, max_length=20)),
                ('abandoned_at', models.DateTimeField(db_index=True, default=django.utils.timezone.now)),
                ('last_activity_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('email_sent_count', models.PositiveIntegerField(default=0)),
                ('first_email_sent_at', models.DateTimeField(blank=True, null=True)),
                ('last_email_sent_at', models.DateTimeField(blank=True, null=True)),
                ('recovered_at', models.DateTimeField(blank=True, help_text='Siparişe dönüştürüldü mü?', null=True)),
                ('is_recovered', models.BooleanField(db_index=True, default=False)),
                ('is_ignored', models.BooleanField(default=False, help_text='E-posta gönderilmeyecek (manuel olarak işaretlenmiş)')),
                ('cart', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='abandoned_cart', to='apps.cart')),
                ('tenant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='abandoned_carts', to='apps.tenant')),
            ],
            options={
                'db_table': 'abandoned_carts',
                'ordering': ['-abandoned_at'],
            },
        ),
        migrations.AddField(
            model_name='user',
            name='tenant',
            field=models.ForeignKey(blank=True, help_text="User'ın bağlı olduğu tenant (TenantOwner, TenantUser, TenantBayii için)", null=True, on_delete=django.db.models.deletion.CASCADE, related_name='users', to='apps.tenant'),
        ),
        migrations.AddField(
            model_name='user',
            name='user_permissions',
            field=models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='custom_user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions'),
        ),
        migrations.CreateModel(
            name='WishlistItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('note', models.TextField(blank=True, help_text='Müşteri notu')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='wishlist_items', to='apps.product')),
                ('variant', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='wishlist_items', to='apps.productvariant')),
                ('wishlist', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='apps.wishlist')),
            ],
            options={
                'db_table': 'wishlist_items',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['wishlist'], name='wishlist_it_wishlis_16e536_idx'), models.Index(fields=['product'], name='wishlist_it_product_282ecb_idx')],
                'unique_together': {('wishlist', 'product', 'variant')},
            },
        ),
        migrations.AddIndex(
            model_name='wishlist',
            index=models.Index(fields=['tenant', 'customer'], name='wishlists_tenant__b501f3_idx'),
        ),
        migrations.AddIndex(
            model_name='wishlist',
            index=models.Index(fields=['is_default'], name='wishlists_is_defa_86ad0a_idx'),
        ),
        migrations.AddIndex(
            model_name='webhookevent',
            index=models.Index(fields=['webhook', 'is_success'], name='webhook_eve_webhook_f41ec9_idx'),
        ),
        migrations.AddIndex(
            model_name='webhookevent',
            index=models.Index(fields=['event_type'], name='webhook_eve_event_t_1d3d5d_idx'),
        ),
        migrations.AddIndex(
            model_name='webhookevent',
            index=models.Index(fields=['created_at'], name='webhook_eve_created_8fa52f_idx'),
        ),
        migrations.AddIndex(
            model_name='webhook',
            index=models.Index(fields=['tenant', 'status'], name='webhooks_tenant__3268c0_idx'),
        ),
        migrations.AddIndex(
            model_name='tenant',
            index=models.Index(fields=['slug'], name='tenants_slug_3181c2_idx'),
        ),
        migrations.AddIndex(
            model_name='tenant',
            index=models.Index(fields=['subdomain'], name='tenants_subdoma_69cf01_idx'),
        ),
        migrations.AddIndex(
            model_name='tenant',
            index=models.Index(fields=['status'], name='tenants_status_80d9b6_idx'),
        ),
        migrations.AddIndex(
            model_name='tax',
            index=models.Index(fields=['tenant', 'is_active'], name='taxes_tenant__891be5_idx'),
        ),
        migrations.AddIndex(
            model_name='shippingzonerate',
            index=models.Index(fields=['zone', 'shipping_method'], name='shipping_zo_zone_id_0d44e3_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='shippingzonerate',
            unique_together={('zone', 'shipping_method')},
        ),
        migrations.AddIndex(
            model_name='shippingzone',
            index=models.Index(fields=['tenant', 'is_active'], name='shipping_zo_tenant__78bddf_idx'),
        ),
        migrations.AddIndex(
            model_name='shippingmethod',
            index=models.Index(fields=['tenant', 'is_active'], name='shipping_me_tenant__61f321_idx'),
        ),
        migrations.AddIndex(
            model_name='shippingaddress',
            index=models.Index(fields=['tenant', 'user'], name='shipping_ad_tenant__eb750e_idx'),
        ),
        migrations.AddIndex(
            model_name='salesreport',
            index=models.Index(fields=['tenant', 'period', 'period_start'], name='sales_repor_tenant__7e214f_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='salesreport',
            unique_together={('tenant', 'period', 'period_start')},
        ),
        migrations.AlterUniqueTogether(
            name='reviewhelpful',
            unique_together={('review', 'customer', 'ip_address')},
        ),
        migrations.AddIndex(
            model_name='promotion',
            index=models.Index(fields=['tenant', 'is_active'], name='promotions_tenant__fd505c_idx'),
        ),
        migrations.AddIndex(
            model_name='promotion',
            index=models.Index(fields=['valid_from', 'valid_until'], name='promotions_valid_f_7ffd1e_idx'),
        ),
        migrations.AddIndex(
            model_name='productvariant',
            index=models.Index(fields=['product', 'sku'], name='product_var_product_c3e835_idx'),
        ),
        migrations.AddIndex(
            model_name='productvariant',
            index=models.Index(fields=['is_default'], name='product_var_is_defa_3d8bd4_idx'),
        ),
        migrations.AddIndex(
            model_name='productreview',
            index=models.Index(fields=['tenant', 'product', 'status'], name='product_rev_tenant__470dd3_idx'),
        ),
        migrations.AddIndex(
            model_name='productreview',
            index=models.Index(fields=['tenant', 'customer'], name='product_rev_tenant__8b0e03_idx'),
        ),
        migrations.AddIndex(
            model_name='productreview',
            index=models.Index(fields=['rating'], name='product_rev_rating_fb8943_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='productreview',
            unique_together={('product', 'customer', 'customer_email')},
        ),
        migrations.AlterUniqueTogether(
            name='productoptionvalue',
            unique_together={('option', 'value')},
        ),
        migrations.AddIndex(
            model_name='productbundleitem',
            index=models.Index(fields=['bundle'], name='product_bun_bundle__d8decb_idx'),
        ),
        migrations.AddIndex(
            model_name='productbundleitem',
            index=models.Index(fields=['product'], name='product_bun_product_f2c39d_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='productbundleitem',
            unique_together={('bundle', 'product', 'variant')},
        ),
        migrations.AddIndex(
            model_name='productbundle',
            index=models.Index(fields=['tenant', 'is_active'], name='product_bun_tenant__6c7b3f_idx'),
        ),
        migrations.AddIndex(
            model_name='productbundle',
            index=models.Index(fields=['tenant', 'slug'], name='product_bun_tenant__9c014c_idx'),
        ),
        migrations.AddIndex(
            model_name='productattributevalue',
            index=models.Index(fields=['attribute', 'slug'], name='product_att_attribu_1498f2_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='productattributevalue',
            unique_together={('attribute', 'slug')},
        ),
        migrations.AddIndex(
            model_name='productattributemapping',
            index=models.Index(fields=['product'], name='product_att_product_57bdcc_idx'),
        ),
        migrations.AddIndex(
            model_name='productattributemapping',
            index=models.Index(fields=['attribute', 'value'], name='product_att_attribu_560897_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='productattributemapping',
            unique_together={('product', 'attribute', 'value')},
        ),
        migrations.AddIndex(
            model_name='productattribute',
            index=models.Index(fields=['tenant', 'slug'], name='product_att_tenant__f006a4_idx'),
        ),
        migrations.AddIndex(
            model_name='productattribute',
            index=models.Index(fields=['tenant', 'is_filterable'], name='product_att_tenant__65dd8b_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='productattribute',
            unique_together={('tenant', 'slug')},
        ),
        migrations.AddIndex(
            model_name='productanalytics',
            index=models.Index(fields=['tenant', 'product', 'report_date'], name='product_ana_tenant__5f7e58_idx'),
        ),
        migrations.AddIndex(
            model_name='productanalytics',
            index=models.Index(fields=['tenant', 'report_date'], name='product_ana_tenant__ad5d22_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='productanalytics',
            unique_together={('tenant', 'product', 'report_date')},
        ),
        migrations.AddIndex(
            model_name='product',
            index=models.Index(fields=['tenant', 'status'], name='products_tenant__60bcff_idx'),
        ),
        migrations.AddIndex(
            model_name='product',
            index=models.Index(fields=['tenant', 'slug'], name='products_tenant__b49674_idx'),
        ),
        migrations.AddIndex(
            model_name='product',
            index=models.Index(fields=['tenant', 'is_visible'], name='products_tenant__f3e8f5_idx'),
        ),
        migrations.AddIndex(
            model_name='product',
            index=models.Index(fields=['tenant', 'is_featured'], name='products_tenant__49c3a0_idx'),
        ),
        migrations.AddIndex(
            model_name='product',
            index=models.Index(fields=['sku'], name='products_sku_fe2039_idx'),
        ),
        migrations.AddIndex(
            model_name='product',
            index=models.Index(fields=['sort_order'], name='products_sort_or_6c1e3d_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['tenant', 'status'], name='payments_tenant__c38e7b_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['order'], name='payments_order_i_b32b33_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['transaction_id'], name='payments_transac_a1f824_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['payment_number'], name='payments_payment_c27a96_idx'),
        ),
        migrations.AddIndex(
            model_name='orderitem',
            index=models.Index(fields=['order'], name='order_items_order_i_26ad88_idx'),
        ),
        migrations.AddIndex(
            model_name='orderitem',
            index=models.Index(fields=['product'], name='order_items_product_a53db1_idx'),
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['tenant', 'status'], name='orders_tenant__ed6a9d_idx'),
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['tenant', 'payment_status'], name='orders_tenant__6c7b6f_idx'),
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['order_number'], name='orders_order_n_1336be_idx'),
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['customer_email'], name='orders_custome_cf1fac_idx'),
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['created_at'], name='orders_created_77e2b9_idx'),
        ),
        migrations.AddIndex(
            model_name='loyaltytransaction',
            index=models.Index(fields=['loyalty_points'], name='loyalty_tra_loyalty_457447_idx'),
        ),
        migrations.AddIndex(
            model_name='loyaltytransaction',
            index=models.Index(fields=['order'], name='loyalty_tra_order_i_d6c3c8_idx'),
        ),
        migrations.AddIndex(
            model_name='loyaltypoints',
            index=models.Index(fields=['tenant', 'customer'], name='loyalty_poi_tenant__b2bd74_idx'),
        ),
        migrations.AddIndex(
            model_name='inventorymovement',
            index=models.Index(fields=['tenant', 'movement_type'], name='inventory_m_tenant__786b90_idx'),
        ),
        migrations.AddIndex(
            model_name='inventorymovement',
            index=models.Index(fields=['product', 'variant'], name='inventory_m_product_e6df5f_idx'),
        ),
        migrations.AddIndex(
            model_name='inventorymovement',
            index=models.Index(fields=['order'], name='inventory_m_order_i_904320_idx'),
        ),
        migrations.AddIndex(
            model_name='inventorymovement',
            index=models.Index(fields=['created_at'], name='inventory_m_created_c2f39c_idx'),
        ),
        migrations.AddIndex(
            model_name='inventoryalert',
            index=models.Index(fields=['tenant', 'is_active'], name='inventory_a_tenant__d48a2c_idx'),
        ),
        migrations.AddIndex(
            model_name='inventoryalert',
            index=models.Index(fields=['product', 'variant'], name='inventory_a_product_149e22_idx'),
        ),
        migrations.AddIndex(
            model_name='giftcardtransaction',
            index=models.Index(fields=['gift_card'], name='gift_card_t_gift_ca_5511f6_idx'),
        ),
        migrations.AddIndex(
            model_name='giftcardtransaction',
            index=models.Index(fields=['order'], name='gift_card_t_order_i_ff0b9a_idx'),
        ),
        migrations.AddIndex(
            model_name='giftcard',
            index=models.Index(fields=['tenant', 'code'], name='gift_cards_tenant__080e94_idx'),
        ),
        migrations.AddIndex(
            model_name='giftcard',
            index=models.Index(fields=['tenant', 'status'], name='gift_cards_tenant__73b225_idx'),
        ),
        migrations.AddIndex(
            model_name='giftcard',
            index=models.Index(fields=['customer'], name='gift_cards_custome_0f7eed_idx'),
        ),
        migrations.AddIndex(
            model_name='giftcard',
            index=models.Index(fields=['valid_from', 'valid_until'], name='gift_cards_valid_f_434a63_idx'),
        ),
        migrations.AddIndex(
            model_name='domain',
            index=models.Index(fields=['tenant', 'verification_status'], name='domains_tenant__53c7af_idx'),
        ),
        migrations.AddIndex(
            model_name='domain',
            index=models.Index(fields=['domain_name'], name='domains_domain__def5b5_idx'),
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['tenant', 'is_active'], name='customers_tenant__ac02c9_idx'),
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['tenant', 'user'], name='customers_tenant__c68da1_idx'),
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['customer_group'], name='customers_custome_3722f7_idx'),
        ),
        migrations.AddIndex(
            model_name='currency',
            index=models.Index(fields=['tenant', 'code'], name='currencies_tenant__ea5b34_idx'),
        ),
        migrations.AddIndex(
            model_name='currency',
            index=models.Index(fields=['tenant', 'is_default'], name='currencies_tenant__4e7e07_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='currency',
            unique_together={('tenant', 'code')},
        ),
        migrations.AddIndex(
            model_name='coupon',
            index=models.Index(fields=['tenant', 'code'], name='coupons_tenant__ee63f1_idx'),
        ),
        migrations.AddIndex(
            model_name='coupon',
            index=models.Index(fields=['tenant', 'is_active'], name='coupons_tenant__6c0ec2_idx'),
        ),
        migrations.AddIndex(
            model_name='coupon',
            index=models.Index(fields=['valid_from', 'valid_until'], name='coupons_valid_f_012901_idx'),
        ),
        migrations.AddIndex(
            model_name='category',
            index=models.Index(fields=['tenant', 'slug'], name='categories_tenant__1b942e_idx'),
        ),
        migrations.AddIndex(
            model_name='category',
            index=models.Index(fields=['tenant', 'is_active'], name='categories_tenant__bf6fd0_idx'),
        ),
        migrations.AddIndex(
            model_name='cartitem',
            index=models.Index(fields=['cart'], name='cart_items_cart_id_3caa7d_idx'),
        ),
        migrations.AddIndex(
            model_name='cartitem',
            index=models.Index(fields=['product'], name='cart_items_product_6a1de7_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='cartitem',
            unique_together={('cart', 'product', 'variant')},
        ),
        migrations.AddIndex(
            model_name='cart',
            index=models.Index(fields=['tenant', 'customer', 'is_active'], name='carts_tenant__d8a711_idx'),
        ),
        migrations.AddIndex(
            model_name='cart',
            index=models.Index(fields=['tenant', 'session_id', 'is_active'], name='carts_tenant__bb2a98_idx'),
        ),
        migrations.AddIndex(
            model_name='cart',
            index=models.Index(fields=['expires_at'], name='carts_expires_8643c1_idx'),
        ),
        migrations.AddIndex(
            model_name='analyticsevent',
            index=models.Index(fields=['tenant', 'event_type', 'created_at'], name='analytics_e_tenant__5b981d_idx'),
        ),
        migrations.AddIndex(
            model_name='analyticsevent',
            index=models.Index(fields=['tenant', 'customer'], name='analytics_e_tenant__c04f4b_idx'),
        ),
        migrations.AddIndex(
            model_name='analyticsevent',
            index=models.Index(fields=['session_id'], name='analytics_e_session_b3cbf5_idx'),
        ),
        migrations.AddIndex(
            model_name='analyticsevent',
            index=models.Index(fields=['created_at'], name='analytics_e_created_3bce1d_idx'),
        ),
        migrations.AddIndex(
            model_name='abandonedcart',
            index=models.Index(fields=['tenant', 'is_recovered'], name='abandoned_c_tenant__598aeb_idx'),
        ),
        migrations.AddIndex(
            model_name='abandonedcart',
            index=models.Index(fields=['tenant', 'abandoned_at'], name='abandoned_c_tenant__a843dc_idx'),
        ),
        migrations.AddIndex(
            model_name='abandonedcart',
            index=models.Index(fields=['customer_email'], name='abandoned_c_custome_6dc143_idx'),
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['tenant', 'role'], name='users_tenant__b30c7b_idx'),
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['email'], name='users_email_4b85f2_idx'),
        ),
    ]
